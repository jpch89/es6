<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>let-vs-const</title>
</head>
<body>
    <script>
    // var 声明的变量可以重复定义
    var price = 100;
    var price = 200;
    // 这样不会报错
    // 隐患：我们可能会不小心覆盖别人使用的变量。
    // 这样会导致奇葩的 bug 并且难以定位。
    // 解决方案：使用 let 和 const 代替，它们不能在同一个作用域中重复声明变量

    let count = 10;
    // 下面报错
    // Uncaught SyntaxError: Identifier 'count' has already been declared
    // let count = 20;

    let discount = .9;
    if (count > 5) {
        // 不报错，因为位于不同作用域
        let discount = .5;
    }
    console.log(discount)  // 0.9

    // let 与 const 的相同点：在同一作用域重复声明变量会报错
    // let 与 const 的不同点：const 声明的变量不能重新赋值
    const key = "abc123";
    // 下面会报错
    // Uncaught TypeError: Assignment to constant variable.
    // key = "abc1234";

    // 补充：const 必须在声明变量的同时赋初始值
    // 下面会报错
    // Uncaught SyntaxError: Missing initializer in const declaration

    // 注意：const 声明的对象的属性可以被改变，因为对象是引用类型
    const person = {
        name: "Jelly",
        age: 20
    };
    person.age = 21;
    console.log(person.age);  // 21

    // 如果不允许修改对象属性，可以用 es5 的 Object.freeze() 方法
    const Jelly = Object.freeze(person);
    Jelly.age = 100;
    console.log(Jelly.age);  // 21
    </script>
</body>
</html>
